{% extends "base.html" %}
{% block title %}Регистрация — TodoAPI{% endblock %}

{% block content %}
<div class="container container--auth">
  <div class="auth-card">
    <div class="auth-body">
      <h1 class="auth-title">Создать аккаунт</h1>
      <p class="auth-sub">Зарегистрируйтесь, чтобы начать работать с задачами</p>

      {% if error %}
        <div class="auth-alert">{{ error }}</div>
      {% endif %}

      <form method="post" action="/register" class="auth-form" onsubmit="
        const p=document.getElementById('reg_password');
        const c=document.getElementById('reg_confirm');
        if(p.value!==c.value){ alert('Пароли не совпадают'); return false; }
        return true;
      ">
        <label class="auth-label" for="name">Имя</label>
        <div class="auth-row">
          <span class="auth-icon">
            <svg viewBox="0 0 24 24">
              <circle cx="12" cy="8" r="4" fill="none"/>
              <path d="M4 20a8 8 0 0 1 16 0" fill="none"/>
            </svg>
          </span>
          <input class="auth-input" id="name" name="name" type="text" required value="{{ name or '' }}">
        </div>

        <label class="auth-label" for="email">Email</label>
        <div class="auth-row">
          <span class="auth-icon">
            <svg viewBox="0 0 24 24">
              <rect x="3" y="5" width="18" height="14" rx="2" ry="2" fill="none"/>
              <polyline points="3,7 12,13 21,7" fill="none"/>
            </svg>
          </span>
          <input class="auth-input" id="email" name="email" type="email" required value="{{ email or '' }}">
        </div>

        <label class="auth-label" for="reg_password">Пароль</label>
        <div class="auth-row">
          <span class="auth-icon">
            <svg viewBox="0 0 24 24">
              <rect x="6" y="11" width="12" height="10" rx="2" ry="2" fill="none"/>
              <path d="M8 11V7a4 4 0 0 1 8 0v4" fill="none"/>
            </svg>
          </span>
          <input class="auth-input" id="reg_password" name="password" type="password" minlength="6" required>
          <button type="button" class="auth-eye" aria-label="Показать пароль"
            onclick="const i=document.getElementById('reg_password'); i.type=i.type==='password'?'text':'password'">
            <svg viewBox="0 0 24 24">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8S1 12 1 12z" fill="none"/>
              <circle cx="12" cy="12" r="3" fill="none"/>
            </svg>
          </button>
        </div>

        <label class="auth-label" for="reg_confirm">Повторите пароль</label>
        <div class="auth-row">
          <span class="auth-icon">
            <svg viewBox="0 0 24 24">
              <rect x="6" y="11" width="12" height="10" rx="2" ry="2" fill="none"/>
              <path d="M8 11V7a4 4 0 0 1 8 0v4" fill="none"/>
            </svg>
          </span>
          <input class="auth-input" id="reg_confirm" type="password" required>
          <button type="button" class="auth-eye" aria-label="Показать пароль"
            onclick="const i=document.getElementById('reg_confirm'); i.type=i.type==='password'?'text':'password'">
            <svg viewBox="0 0 24 24">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8S1 12 1 12z" fill="none"/>
              <circle cx="12" cy="12" r="3" fill="none"/>
            </svg>
          </button>
        </div>

        <button class="auth-btn" type="submit">Создать аккаунт</button>
      </form>

      <div class="auth-foot">
        Уже есть аккаунт? <a href="/">Войти</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
